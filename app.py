
import pandas as pd
import streamlit as st
from PIL import Image

# === –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ===
st.set_page_config(page_title="–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å —Å–≤–∞–π ‚Äî –ï–≤—Ä–æ–±–µ—Ç–æ–Ω", layout="wide")

# === –õ–æ–≥–æ—Ç–∏–ø –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ ===
col1, col2 = st.columns([1, 8])
with col1:
    st.image("https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Concrete_truck_icon.svg/512px-Concrete_truck_icon.svg.png", width=60)
with col2:
    st.markdown("""
        <h1 style='margin-bottom: 0;'>üìå –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å–≤–∞–π</h1>
        <p style='margin-top: 0; color: gray;'>–ö–æ–º–ø–∞–Ω–∏—è <b>–ï–≤—Ä–æ–±–µ—Ç–æ–Ω</b>, –≥. –ê—Ç—ã—Ä–∞—É</p>
    """, unsafe_allow_html=True)

# === –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ===
def load_data():
    return {
        "–°120.30-9": pd.DataFrame({
            "–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ": ["–ü—Ä–æ–¥–æ–ª—å–Ω—ã–µ —Å—Ç–µ—Ä–∂–Ω–∏", "–•–æ–º—É—Ç + –Ω–æ—Å", "–°–µ—Ç–∫–∏ –æ–≥–æ–ª–æ–≤–Ω–∏–∫–∞", "–î–µ—Ç–∞–ª—å –ø—Ä–∏—Å—Ç–∞–≤–Ω–æ–≥–æ –Ω–æ—Å–∞", "–ü–µ—Ç–ª–∏ —Å—Ç—Ä–æ–ø–æ–≤–æ—á–Ω—ã–µ"],
            "–í–µ—Å —Å –ø–æ—Ç–µ—Ä—è–º–∏ (–∫–≥)": [76.0, 6.364, 1.3, 1.652, 2.425],
            "–¶–µ–Ω–∞ –∑–∞ –∫–≥ (—Ç–≥)": [295.0, 390.0, 390.0, 375.0, 348.0]
        }),
        "–°100.30-8": pd.DataFrame({
            "–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ": ["–ü—Ä–æ–¥–æ–ª—å–Ω—ã–µ —Å—Ç–µ—Ä–∂–Ω–∏", "–•–æ–º—É—Ç", "–ü–µ—Ç–ª–∏ –º–æ–Ω—Ç–∞–∂–Ω—ã–µ"],
            "–í–µ—Å —Å –ø–æ—Ç–µ—Ä—è–º–∏ (–∫–≥)": [52.0, 4.5, 2.0],
            "–¶–µ–Ω–∞ –∑–∞ –∫–≥ (—Ç–≥)": [295.0, 390.0, 348.0]
        })
    }

# === –í—ã–±–æ—Ä –º–∞—Ä–∫–∏ —Å–≤–∞–∏ ===
all_data = load_data()
st.markdown("---")
st.markdown("### –í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä–∫—É —Å–≤–∞–∏")
selected_mark = st.selectbox("–ú–∞—Ä–∫–∞ —Å–≤–∞–∏:", list(all_data.keys()))

# === –¢–∞–±–ª–∏—Ü–∞ —Ä–∞—Å—á–µ—Ç–∞ ===
df = all_data[selected_mark].copy()
st.markdown("#### –£–∫–∞–∂–∏—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã (—Ç–≥ –∑–∞ –∫–≥) –ø–æ –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏:")

for i in range(len(df)):
    df.loc[i, "–¶–µ–Ω–∞ –∑–∞ –∫–≥ (—Ç–≥)"] = st.number_input(
        label=f"{df.loc[i, '–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ']}",
        min_value=0.0,
        value=float(df.loc[i, "–¶–µ–Ω–∞ –∑–∞ –∫–≥ (—Ç–≥)"]),
        step=1.0,
        key=f"price_{selected_mark}_{i}"
    )
    df.loc[i, "–°—É–º–º–∞ (—Ç–≥)"] = df.loc[i, "–í–µ—Å —Å –ø–æ—Ç–µ—Ä—è–º–∏ (–∫–≥)"] * df.loc[i, "–¶–µ–Ω–∞ –∑–∞ –∫–≥ (—Ç–≥)"]

# === –í—ã–≤–æ–¥ —Ç–∞–±–ª–∏—Ü—ã –∏ –∏—Ç–æ–≥–∞ ===
st.markdown("---")
st.subheader("üìä –†–∞—Å—á—ë—Ç –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º")
st.dataframe(df.style.format({"–í–µ—Å —Å –ø–æ—Ç–µ—Ä—è–º–∏ (–∫–≥)": "{:.3f}", "–¶–µ–Ω–∞ –∑–∞ –∫–≥ (—Ç–≥)": "{:.0f}", "–°—É–º–º–∞ (—Ç–≥)": "{:.2f}"}))

total = df["–°—É–º–º–∞ (—Ç–≥)"].sum()
st.markdown(f"""
<div style='background-color: #f0f2f6; padding: 20px; border-radius: 10px;'>
    <h3>üí∞ –ò—Ç–æ–≥–æ–≤–∞—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å —Å–≤–∞–∏ <span style='color:#ff6600;'>{selected_mark}</span>: <span style='color:green;'>{total:,.2f} —Ç–≥</span></h3>
</div>
""", unsafe_allow_html=True)

# === –§—É—Ç–µ—Ä ===
st.markdown("""
---
<small>–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ <b>–ï–≤—Ä–æ–±–µ—Ç–æ–Ω</b> ¬∑ –≥. –ê—Ç—ã—Ä–∞—É ¬∑ 2025</small>
""", unsafe_allow_html=True)
